#include <LiquidCrystal_I2C.h>
#include <DS1302.h>

LiquidCrystal_I2C lcd(0x27, 20, 4); 
DS1302 rtc(6, 7, 8); 
const int leds[] = {2, 3, 4}; 

void setup() {
  rtc.halt(false);
  rtc.writeProtect(false);
  lcd.init();
  lcd.backlight();
  for (int pin : leds) pinMode(pin, OUTPUT);
}

void loop() {
  Time t = rtc.getTime();
  lcd.setCursor(0, 0); lcd.print("Date: "); lcd.print(rtc.getDateStr());
  lcd.setCursor(0, 1); lcd.print("Time: ");
  lcd.print(t.hour); lcd.print(":"); lcd.print(t.min < 10 ? "0" : ""); lcd.print(t.min); 
  lcd.print(":"); lcd.print(t.sec < 10 ? "0" : ""); lcd.print(t.sec);

  for (int i = 0; i < 3; i++) digitalWrite(leds[i], (t.sec / 20 == i));
  delay(1000);
}
